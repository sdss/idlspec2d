#!/usr/bin/env python3
from boss_drp.utils.cleanup_bkups import cleanup_bkups

import argparse
import os

if __name__ == "__main__":
    parser = argparse.ArgumentParser(description='Clean spAll backup files')
    parser.add_argument('--topdir', default = None, help = 'Boss Spectro Redux base directory')
    parser.add_argument('--run2d',  default = None, help = 'Run2d')
    parser.add_argument('--epoch', action = 'store_true', help = 'run for the epoch coadds')
    parser.add_argument('--custom', help='Name of custom Coadd')
    parser.add_argument('--backups', default= 3, help = 'Number of backups to keep', type= int)
    args = parser.parse_args()

        
    
    if args.backups == 0:
        arg.backups = None

    if args.backups is None:
        exit
    if args.topdir is None:
        args.topdir = os.getenv('BOSS_SPECTRO_REDUX')
    if args.run2d is None:
        args.run2d = os.getenv('RUN2D')


    cleanup_bkups(args.topdir, args.run2d, backups = args.backups, epoch=args.epoch,
                  custom = args.custom)



