#!/usr/bin/env python
import argparse
import numpy as np
import matplotlib
import numpy as np
import copy
import os
import pdb
import matplotlib.pyplot as plt

from pyvista import boss

if __name__ == "__main__":
    descr = "Routine to transfer trace locations from an initial arc/flat pair given subsequent arc frames only"
    parser = argparse.ArgumentParser(description=descr,
                                     usage="boss_arcs MJD")
    parser.add_argument("--mjd", type=int, help="MJD to process",required=True)
    parser.add_argument("--outdir", type=str, help="output directory")
    parser.add_argument("--obs", type=str, help="observatory (lco|apo)",default='lco')
    parser.add_argument("--vers", type=str, help="BOSS_SPECTRO_REDUX version",default='master')
    parser.add_argument("--threads", type=int, help="number of threads",default=8)
    parser.add_argument("--nskip", type=int, help="use every nskip line",default=40)
    parser.add_argument("--cams", type=str, help="Supply the camera for operation with SOS files", default=None)
    parser.add_argument("--clobber", action="store_true",
                        required=False, help="clobber?")
    args = parser.parse_args()
    if args.vers.lower() = 'sos': args.vers = ''
    matplotlib.use('Agg')
    boss.arc_transform(args.mjd, obs=args.obs, clobber=args.clobber, threads=args.threads, 
                       outdir=args.outdir, vers=args.vers, cams=args.cams)
